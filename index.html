<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fantasome | Form Pembayaran</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .fade-in {
      animation: fadeIn 0.8s ease-out;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-700 min-h-screen flex items-center justify-center px-4">
  <div class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-md fade-in">
    <div class="text-center mb-4">
      <img src="https://i.ibb.co/7NNMgKD/fantasome.png" alt="Fantasome" class="w-20 h-20 mx-auto rounded-full shadow-md" />
      <h1 class="mt-2 text-xl font-bold text-gray-800">Fantasome Official</h1>
      <p class="text-sm text-gray-500">Formulir Upload Bukti Pembayaran</p>
    </div>
    <form id="paymentForm">
      <input type="text" id="nama" placeholder="Nama Lengkap" class="mb-3 w-full border px-3 py-2 rounded-lg" required />
      <input type="tel" id="nomor" placeholder="Nomor WhatsApp Aktif" class="mb-3 w-full border px-3 py-2 rounded-lg" required />
      <label class="block font-semibold mb-1">Foto Bukti Transfer</label>
      <input type="file" id="bukti" accept="image/*" class="mb-4 w-full" required />
      <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg w-full">
        Kirim ke WhatsApp Admin
      </button>
    </form>
    <div id="status" class="mt-4 text-sm text-center text-gray-600"></div>
  </div>

  <script>
    const imgbbApiKey = "cef18c0096a9388f2a22eb1f603542c0"; // API key ImgBB kamu
    const waTujuan = "628998967277"; // Nomor WA kamu

    document.getElementById("paymentForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const nama = document.getElementById("nama").value.trim();
      const nomor = document.getElementById("nomor").value.trim();
      const file = document.getElementById("bukti").files[0];
      const status = document.getElementById("status");

      if (!file) {
        alert("Harap upload bukti pembayaran.");
        return;
      }

      status.textContent = "üì§ Mengupload gambar ke server...";

      const reader = new FileReader();
      reader.onloadend = async function () {
        const base64 = reader.result.replace(/^data:image\\/\\w+;base64,/, "");
        const formData = new FormData();
        formData.append("image", base64);

        try {
          const res = await fetch(`https://api.imgbb.com/1/upload?key=${imgbbApiKey}`, {
            method: "POST",
            body: formData,
          });

          const data = await res.json();
          if (!data.success) throw new Error("Gagal upload gambar.");

          const imageUrl = data.data.url;
          const pesan = `*Formulir Pembayaran Baru*\n\nüë§ Nama: ${nama}\nüì± Nomor WA: ${nomor}\nüßæ Bukti: ${imageUrl}`;
          const waLink = `https://wa.me/${waTujuan}?text=${encodeURIComponent(pesan)}`;
          
          status.innerHTML = `‚úÖ Gambar berhasil diupload! <a href="${imageUrl}" target="_blank" class="underline text-blue-600">Lihat Bukti</a>`;
          window.open(waLink, "_blank");
        } catch (err) {
          console.error(err);
          status.textContent = "‚ùå Gagal mengupload gambar. Coba ulangi.";
        }
      };

      reader.readAsDataURL(file);
    });
  </script>
</body>
        </html>
